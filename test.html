<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Plotly.js Comprehensive Demo</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #0b1020;
      color: #f5f5f5;
    }
    header {
      padding: 2rem 1.5rem 1rem;
      background: radial-gradient(circle at top left, #3b82f6, #111827 55%, #020617 100%);
      color: white;
    }
    header h1 {
      margin: 0;
      font-size: 2rem;
    }
    header p {
      margin-top: 0.5rem;
      max-width: 800px;
      color: #e5e7eb;
    }
    main {
      padding: 1.5rem;
      max-width: 1200px;
      margin: 0 auto 4rem;
    }
    section {
      margin-bottom: 2.5rem;
      background: #020617;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(148, 163, 184, 0.3);
    }
    section h2 {
      margin-top: 0;
      margin-bottom: 0.35rem;
      font-size: 1.25rem;
      color: #f97316;
    }
    section p {
      margin-top: 0;
      margin-bottom: 1rem;
      font-size: 0.94rem;
      color: #cbd5f5;
    }
    .plot-container {
      width: 100%;
      height: 400px;
    }
    footer {
      text-align: center;
      padding: 2rem 1.5rem 3rem;
      font-size: 0.85rem;
      color: #9ca3af;
      border-top: 1px solid #111827;
      background: #020617;
    }
    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background: rgba(15, 23, 42, 0.9);
      padding: 0.1rem 0.3rem;
      border-radius: 4px;
      font-size: 0.85rem;
    }
    a {
      color: #60a5fa;
    }
  </style>
</head>
<body>
  <header>
    <h1>Plotly.js Comprehensive Demo</h1>
    <p>
      This standalone HTML file showcases a variety of Plotly.js chart types: basic scatter and bar charts,
      statistical plots, heatmaps, 3D surfaces, polar charts, ternary plots, animations, and interactive controls.
      No Python or server code is required; everything runs in your browser with <code>Plotly.newPlot</code>.
    </p>
  </header>

  <main>
    <section>
      <h2>1. Basic Scatter &amp; Line Plot</h2>
      <p>
        A simple scatter and line plot with hover tooltips and a shared legend.
      </p>
      <div id="plot-basic-scatter" class="plot-container"></div>
    </section>

    <section>
      <h2>2. Grouped &amp; Stacked Bar Charts</h2>
      <p>
        Bar charts can be grouped or stacked using the <code>barmode</code> layout option.
      </p>
      <div id="plot-bar" class="plot-container"></div>
    </section>

    <section>
      <h2>3. Histograms &amp; Density</h2>
      <p>
        Histograms with automatic binning and overlaid density-style display using transparency.
      </p>
      <div id="plot-hist" class="plot-container"></div>
    </section>

    <section>
      <h2>4. Box &amp; Violin Plots</h2>
      <p>
        Summary statistics such as median, quartiles, and distribution shape visualised with box and violin traces.
      </p>
      <div id="plot-box-violin" class="plot-container"></div>
    </section>

    <section>
      <h2>5. Heatmap &amp; Contour</h2>
      <p>
        Visualisation of a 2D function using both heatmap and contour traces side by side.
      </p>
      <div id="plot-heatmap" class="plot-container"></div>
    </section>

    <section>
      <h2>6. 3D Surface Plot</h2>
      <p>
        A 3D surface with interactive rotation, zoom, and hover.
      </p>
      <div id="plot-surface3d" class="plot-container"></div>
    </section>

    <section>
      <h2>7. 3D Scatter Plot</h2>
      <p>
        A 3D scatter plot of points sampled from a noisy spiral.
      </p>
      <div id="plot-scatter3d" class="plot-container"></div>
    </section>

    <section>
      <h2>8. Polar &amp; Radar Plot</h2>
      <p>
        Polar coordinates can be used for both scatter and filled "radar" charts.
      </p>
      <div id="plot-polar" class="plot-container"></div>
    </section>

    <section>
      <h2>9. Ternary Plot</h2>
      <p>
        A ternary diagram for compositional data where components sum to 1.
      </p>
      <div id="plot-ternary" class="plot-container"></div>
    </section>

    <section>
      <h2>10. Geographic Scatter (Choropleth-style)</h2>
      <p>
        Scatter plot on a geographic projection using <code>scattergeo</code>. No Mapbox token required.
      </p>
      <div id="plot-geo" class="plot-container"></div>
    </section>

    <section>
      <h2>11. Animation with Slider</h2>
      <p>
        Animated scatter plot with frames and a slider, showing a moving sine wave.
      </p>
      <div id="plot-anim" class="plot-container"></div>
    </section>

    <section>
      <h2>12. Subplots Grid</h2>
      <p>
        Multiple plot types arranged in a 2 &times; 2 grid using <code>domain</code> subplots.
      </p>
      <div id="plot-subplots" class="plot-container"></div>
    </section>
  </main>

  <footer>
    Standalone Plotly.js demo. You can edit this file in any text editor and open it
    directly in your browser. Visit <a href="https://plotly.com/javascript/" target="_blank" rel="noopener">Plotly.js docs</a> for more.
  </footer>

  <script>
    // Utility functions
    function linspace(start, stop, num) {
      var arr = [];
      var step = (stop - start) / (num - 1);
      for (var i = 0; i < num; i++) {
        arr.push(start + step * i);
      }
      return arr;
    }

    function range(n) {
      var arr = [];
      for (var i = 0; i < n; i++) {
        arr.push(i);
      }
      return arr;
    }

    // 1. Basic Scatter & Line
    (function() {
      var x = linspace(0, 10, 30);
      var yScatter = x.map(function(v) { return Math.sin(v) + (Math.random() - 0.5) * 0.4; });
      var yLine = x.map(function(v) { return Math.cos(v); });

      var scatterTrace = {
        x: x,
        y: yScatter,
        mode: 'markers',
        name: 'Noisy sin(x)',
        marker: { size: 8 }
      };

      var lineTrace = {
        x: x,
        y: yLine,
        mode: 'lines',
        name: 'cos(x)'
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: '#020617',
        margin: { t: 30, r: 10, b: 40, l: 50 },
        xaxis: { title: 'x' },
        yaxis: { title: 'y' },
        legend: { orientation: 'h', x: 0, y: 1.15 }
      };

      Plotly.newPlot('plot-basic-scatter', [scatterTrace, lineTrace], layout, {responsive: true});
    })();

    // 2. Grouped & Stacked Bar Charts
    (function() {
      var x = ['Q1', 'Q2', 'Q3', 'Q4'];
      var y2019 = [10, 16, 12, 18];
      var y2020 = [14, 12, 15, 20];

      var bar1 = {
        x: x,
        y: y2019,
        name: '2019',
        type: 'bar'
      };
      var bar2 = {
        x: x,
        y: y2020,
        name: '2020',
        type: 'bar'
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: '#020617',
        margin: { t: 30, r: 10, b: 40, l: 50 },
        barmode: 'group',
        updatemenus: [{
          type: 'buttons',
          x: 0.0,
          y: 1.2,
          xanchor: 'left',
          buttons: [
            {
              label: 'Grouped',
              method: 'relayout',
              args: ['barmode', 'group']
            },
            {
              label: 'Stacked',
              method: 'relayout',
              args: ['barmode', 'stack']
            }
          ]
        }]
      };

      Plotly.newPlot('plot-bar', [bar1, bar2], layout, {responsive: true});
    })();

    // 3. Histograms & Density
    (function() {
      var n = 500;
      var x1 = [];
      var x2 = [];
      for (var i = 0; i < n; i++) {
        // Box-Muller transform
        var u1 = Math.random();
        var u2 = Math.random();
        var z0 = Math.sqrt(-2.0 * Math.log(u1)) * Math.cos(2.0 * Math.PI * u2);
        var z1 = Math.sqrt(-2.0 * Math.log(u1)) * Math.sin(2.0 * Math.PI * u2);
        x1.push(z0);
        x2.push(z1 * 1.5 + 2.0);
      }

      var hist1 = {
        x: x1,
        type: 'histogram',
        opacity: 0.6,
        name: 'Distribution A'
      };

      var hist2 = {
        x: x2,
        type: 'histogram',
        opacity: 0.6,
        name: 'Distribution B'
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: '#020617',
        margin: { t: 30, r: 10, b: 40, l: 50 },
        barmode: 'overlay',
        xaxis: { title: 'Value' },
        yaxis: { title: 'Count' }
      };

      Plotly.newPlot('plot-hist', [hist1, hist2], layout, {responsive: true});
    })();

    // 4. Box & Violin Plots
    (function() {
      function randomSeries(n, mean, std) {
        var arr = [];
        for (var i = 0; i < n; i++) {
          var u1 = Math.random();
          var u2 = Math.random();
          var z0 = Math.sqrt(-2.0 * Math.log(u1)) * Math.cos(2.0 * Math.PI * u2);
          arr.push(mean + std * z0);
        }
        return arr;
      }

      var xA = randomSeries(100, 0, 1);
      var xB = randomSeries(100, 1, 0.5);
      var xC = randomSeries(100, -0.5, 0.7);

      var boxA = {
        y: xA,
        name: 'Group A',
        type: 'box',
        boxpoints: 'all',
        jitter: 0.4,
        pointpos: -1.8
      };

      var boxB = {
        y: xB,
        name: 'Group B',
        type: 'box',
        boxpoints: 'all',
        jitter: 0.4,
        pointpos: -1.8
      };

      var violinC = {
        y: xC,
        name: 'Group C',
        type: 'violin',
        points: 'all',
        jitter: 0.3
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: '#020617',
        margin: { t: 30, r: 10, b: 40, l: 50 },
        yaxis: { zeroline: false },
        showlegend: false
      };

      Plotly.newPlot('plot-box-violin', [boxA, boxB, violinC], layout, {responsive: true});
    })();

    // 5. Heatmap & Contour
    (function() {
      var x = linspace(-2, 2, 40);
      var y = linspace(-2, 2, 40);
      var z = [];
      for (var i = 0; i < y.length; i++) {
        var row = [];
        for (var j = 0; j < x.length; j++) {
          var xv = x[j];
          var yv = y[i];
          var val = Math.sin(xv * 2) * Math.cos(yv * 2) * Math.exp(-(xv * xv + yv * yv) / 2);
          row.push(val);
        }
        z.push(row);
      }

      var heatmap = {
        z: z,
        x: x,
        y: y,
        type: 'heatmap',
        colorbar: { title: 'f(x, y)' },
        xaxis: 'x',
        yaxis: 'y'
      };

      var contour = {
        z: z,
        x: x,
        y: y,
        type: 'contour',
        showscale: false,
        xaxis: 'x2',
        yaxis: 'y2'
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: '#020617',
        margin: { t: 30, r: 10, b: 40, l: 50 },
        grid: { rows: 1, columns: 2, pattern: 'independent' },
        xaxis: { domain: [0, 0.46], title: 'x' },
        yaxis: { domain: [0, 1], title: 'y' },
        xaxis2: { domain: [0.54, 1], title: 'x' },
        yaxis2: { domain: [0, 1], title: 'y' }
      };

      Plotly.newPlot('plot-heatmap', [heatmap, contour], layout, {responsive: true});
    })();

    // 6. 3D Surface
    (function() {
      var x = linspace(-2, 2, 40);
      var y = linspace(-2, 2, 40);
      var z = [];
      for (var i = 0; i < y.length; i++) {
        var row = [];
        for (var j = 0; j < x.length; j++) {
          var xv = x[j];
          var yv = y[i];
          var r = Math.sqrt(xv * xv + yv * yv);
          var val = Math.sin(3 * r) / (r + 0.001);
          row.push(val);
        }
        z.push(row);
      }

      var surface = {
        type: 'surface',
        x: x,
        y: y,
        z: z
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        margin: { t: 30, r: 0, b: 0, l: 0 }
      };

      Plotly.newPlot('plot-surface3d', [surface], layout, {responsive: true});
    })();

    // 7. 3D Scatter
    (function() {
      var t = linspace(0, 8 * Math.PI, 200);
      var x = [];
      var y = [];
      var z = [];
      for (var i = 0; i < t.length; i++) {
        var ti = t[i];
        var r = 0.2 * ti;
        x.push((r * Math.cos(ti)) + (Math.random() - 0.5) * 0.2);
        y.push((r * Math.sin(ti)) + (Math.random() - 0.5) * 0.2);
        z.push(ti * 0.1 + (Math.random() - 0.5) * 0.2);
      }

      var trace = {
        x: x,
        y: y,
        z: z,
        mode: 'markers',
        type: 'scatter3d',
        marker: {
          size: 3
        }
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        margin: { t: 30, r: 0, b: 0, l: 0 },
        scene: {
          xaxis: { title: 'x' },
          yaxis: { title: 'y' },
          zaxis: { title: 'z' }
        }
      };

      Plotly.newPlot('plot-scatter3d', [trace], layout, {responsive: true});
    })();

    // 8. Polar & Radar Plot
    (function() {
      var categories = ['A', 'B', 'C', 'D', 'E', 'A'];
      var values1 = [3, 5, 2, 6, 4, 3];
      var values2 = [4, 2, 5, 3, 6, 4];

      var radar1 = {
        type: 'scatterpolar',
        r: values1,
        theta: categories,
        fill: 'toself',
        name: 'Profile 1'
      };

      var radar2 = {
        type: 'scatterpolar',
        r: values2,
        theta: categories,
        fill: 'toself',
        name: 'Profile 2'
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: '#020617',
        margin: { t: 30, r: 10, b: 10, l: 10 },
        polar: {
          radialaxis: { visible: true, range: [0, 7] }
        },
        showlegend: true
      };

      Plotly.newPlot('plot-polar', [radar1, radar2], layout, {responsive: true});
    })();

    // 9. Ternary Plot
    (function() {
      var a = [0.2, 0.3, 0.1, 0.4];
      var b = [0.5, 0.4, 0.7, 0.3];
      var c = a.map(function(v, i) { return 1 - v - b[i]; });
      var labels = ['Sample 1', 'Sample 2', 'Sample 3', 'Sample 4'];

      var trace = {
        type: 'scatterternary',
        a: a,
        b: b,
        c: c,
        mode: 'markers+text',
        text: labels,
        textposition: 'top center',
        marker: { size: 10 }
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        ternary: {
          sum: 1,
          aaxis: { title: 'Component A' },
          baxis: { title: 'Component B' },
          caxis: { title: 'Component C' }
        },
        margin: { t: 30, r: 40, b: 30, l: 40 }
      };

      Plotly.newPlot('plot-ternary', [trace], layout, {responsive: true});
    })();

    // 10. Geographic Scatter
    (function() {
      var cities = ['London', 'New York', 'Tokyo', 'Sydney', 'Rio'];
      var lats = [51.5074, 40.7128, 35.6895, -33.8688, -22.9068];
      var lons = [-0.1278, -74.0060, 139.6917, 151.2093, -43.1729];
      var pops = [9.0, 8.4, 37.4, 5.3, 6.7]; // approximate metro population in millions

      var trace = {
        type: 'scattergeo',
        mode: 'markers+text',
        lat: lats,
        lon: lons,
        text: cities.map(function(c, i) { return c + ' (' + pops[i] + 'M)'; }),
        textposition: 'top center',
        marker: {
          size: pops.map(function(v) { return 5 + v; })
        }
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        margin: { t: 30, r: 10, b: 0, l: 10 },
        geo: {
          scope: 'world',
          projection: { type: 'natural earth' },
          showland: true,
          landcolor: '#0f172a',
          oceancolor: '#020617',
          showocean: true,
          bgcolor: 'rgba(0,0,0,0)'
        }
      };

      Plotly.newPlot('plot-geo', [trace], layout, {responsive: true});
    })();

    // 11. Animation with Slider
    (function() {
      var x = linspace(0, 2 * Math.PI, 100);
      var frames = [];
      var tSteps = linspace(0, 2 * Math.PI, 40);

      for (var i = 0; i < tSteps.length; i++) {
        var t = tSteps[i];
        var y = x.map(function(v) { return Math.sin(v + t); });
        frames.push({
          name: 'frame' + i,
          data: [{ x: x, y: y }]
        });
      }

      var trace = {
        x: x,
        y: frames[0].data[0].y,
        mode: 'lines',
        name: 'sin(x + t)'
      };

      var sliderSteps = tSteps.map(function(t, i) {
        return {
          label: 't=' + t.toFixed(2),
          method: 'animate',
          args: [['frame' + i], {
            mode: 'immediate',
            transition: { duration: 0 },
            frame: { duration: 0, redraw: false }
          }]
        };
      });

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: '#020617',
        margin: { t: 40, r: 10, b: 40, l: 50 },
        xaxis: { title: 'x' },
        yaxis: { title: 'y' },
        updatemenus: [{
          type: 'buttons',
          x: 0.05,
          y: 1.2,
          showactive: false,
          buttons: [
            {
              label: 'Play',
              method: 'animate',
              args: [null, {
                fromcurrent: true,
                frame: { duration: 70, redraw: false },
                transition: { duration: 0 }
              }]
            },
            {
              label: 'Pause',
              method: 'animate',
              args: [[null], {
                mode: 'immediate',
                frame: { duration: 0, redraw: false },
                transition: { duration: 0 }
              }]
            }
          ]
        }],
        sliders: [{
          pad: { l: 50, t: 30 },
          currentvalue: {
            visible: true,
            prefix: 't: ',
            xanchor: 'right'
          },
          steps: sliderSteps
        }]
      };

      Plotly.newPlot('plot-anim', [trace], layout, {
        responsive: true,
        frame: { redraw: false }
      }).then(function() {
        Plotly.addFrames('plot-anim', frames);
      });
    })();

    // 12. Subplots Grid (2x2)
    (function() {
      var x = linspace(0, 10, 50);
      var y1 = x.map(function(v) { return Math.sin(v); });
      var y2 = x.map(function(v) { return Math.cos(v); });

      var sub1 = {
        x: x,
        y: y1,
        name: 'sin(x)',
        type: 'scatter',
        xaxis: 'x',
        yaxis: 'y'
      };

      var sub2 = {
        x: x,
        y: y2,
        name: 'cos(x)',
        type: 'scatter',
        xaxis: 'x2',
        yaxis: 'y2'
      };

      var sub3 = {
        x: x,
        y: x.map(function(v) { return v * v; }),
        name: 'x^2',
        type: 'bar',
        xaxis: 'x3',
        yaxis: 'y3'
      };

      var sub4 = {
        type: 'histogram',
        x: y1.concat(y2),
        name: 'Histogram(sin, cos)',
        xaxis: 'x4',
        yaxis: 'y4'
      };

      var layout = {
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: '#020617',
        margin: { t: 40, r: 10, b: 40, l: 50 },
        grid: { rows: 2, columns: 2, pattern: 'independent' },

        xaxis:  { domain: [0.0, 0.45],  anchor: 'y',  title: 'x' },
        yaxis:  { domain: [0.55, 1.0], anchor: 'x', title: 'sin(x)' },

        xaxis2: { domain: [0.55, 1.0], anchor: 'y2', title: 'x' },
        yaxis2: { domain: [0.55, 1.0], anchor: 'x2', title: 'cos(x)' },

        xaxis3: { domain: [0.0, 0.45],  anchor: 'y3', title: 'x' },
        yaxis3: { domain: [0.0, 0.45], anchor: 'x3', title: 'x^2' },

        xaxis4: { domain: [0.55, 1.0], anchor: 'y4', title: 'Value' },
        yaxis4: { domain: [0.0, 0.45], anchor: 'x4', title: 'Count' },

        showlegend: false
      };

      Plotly.newPlot('plot-subplots', [sub1, sub2, sub3, sub4], layout, {responsive: true});
    })();

  </script>
</body>
</html>
